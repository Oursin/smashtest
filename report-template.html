<html>
    <head>
        <meta name="treeObj" content="{{{treeObj}}}"/>
        <meta name="runnerObj" content="{{{runnerObj}}}"/>
        <meta name="reportTime" content="{{{reportTime}}}"/>

        <script src="https://unpkg.com/popper.js@1"></script>
        <script src="https://unpkg.com/tippy.js@4"></script>

        <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
        <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

        <style>
            body {
                background-color: black;
                color: white;
                font-family: Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
                margin: 0;
                padding: 0;
                overflow-y: hidden;
            }

            .header {
                font-size: 16px;
                margin: 0 0 10px 6px;
            }

            .divider-pane {
                position: absolute;
                top: 0;
                bottom: 0;
                width: 50%;
                height: 100%;
                vertical-align: top;
                border: 0;
                margin: 0;
                overflow-x: auto;
                padding: 6px 4px;
            }

            .tree-pane {
                left: 0;
                padding-right: 0;
            }

            .preview-pane {
                right: 0;
                padding-left: 10px;
                background-color: rgb(40,40,40);
            }

            .tree-header {
                margin: 0 0 20px 0;
            }

            .tree-header-container {
                margin: 0 0 0 10px;
                font-size: 13px;
            }

            .branch-container {
                margin: 0 0 30px 0;
            }

            .none-indicator {
                font-size: 14px;
                color: rgb(100,100,100);
                padding-left: 40px;
            }

            .branch {
                margin-bottom: 12px;
                margin-left: 2px;
                position: relative;
            }

            .branch.active {
                background-color: rgb(40,40,40);
            }

            .branch.hover {
                background-color: rgb(40,40,40);
                /*background-color: rgb(70,70,70);*/
            }

            .branch-indicator {
                display: inline-block;
                position: absolute;
                top: 0;
                left: 0;
                width: 10px;
                height: 100%;
                min-width: 10px;
                border: 0;
                margin: 0;
                padding: 0;
            }

            .branch-indicator:hover {
                cursor: pointer;
            }

            .branch-indicator.notrunyet {
                background-color: gray;
            }

            .branch-indicator.running {
                background-color: orange;
                animation: blinker 2s linear infinite;
            }

            @keyframes blinker {
                50% {
                    opacity: 0.3;
                }
            }

            .branch-indicator.passed {
                background-color: green;
            }

            .branch-indicator.failed {
                background-color: red;
            }

            .branch-indicator.skipped {
                background-color: rgb(0,200,200);
            }

            .branch-contents {
                display: inline-block;
                width: 100%;
                border: 0;
                margin: 0;
                padding-left: 10px;
                padding-right: 0;
            }

            .line {
                font-size: 14px;
                position: relative;
                white-space: nowrap;
                cursor: pointer;
            }

            .line.active {
                background-color: rgb(40,40,40);
            }

            .line:hover {
                background-color: rgb(40,40,40);
                /*background-color: rgb(70,70,70);*/
            }

            .line .content {
                display: inline-block;
            }

            .line .filelocation {
                visibility: hidden;
                display: inline-block;
                vertical-align: top;
                color: rgb(130,130,130);
                padding: 0 15px;
                font-size: 13px;
            }

            .line:hover .filelocation {
                visibility: visible;
            }

            .pill {
                position: relative;
                top: -2px;
                color: white;
                padding: 1px 3px;
                border-radius: 5px;
                font-size: 11px;
            }

            .pill.expected {
                background-color: green;
            }

            .pill.unexpected {
                background-color: red;
            }

            .pill.skipped {
                background-color: rgb(0,200,200);
            }

            .pill.running {
                background-color: orange;
            }

            .tooltip-text {
                font-size: 12px;
            }

            .progress-bar {
                height: 20px;
                margin-right: 10px;
                padding: 0;
            }

            .progress-bar .filled-bar {
                background-color: rgb(245,155,0);
                color: white;
                text-align: center;
                height: 100%;
                overflow-x: hidden;
            }

            .progress-bar .filled-bar-text {
                position: relative;
                top: 2px;
                padding: 0 5px;
            }

            .msg {
                color: rgb(100,100,100);
                font-size: 12px;
                font-weight: normal;
            }

            .refresh-msg {
                white-space: nowrap;
            }

            .refresh-msg:hover {
                cursor: pointer;
                filter: brightness(1.75);
            }

            .refresh-icon {
                width: 14px;
                vertical-align: bottom;
            }

            .tree-header-item {
                margin-bottom: 10px;
            }

            .notrunyet-item {
                color: gray;
            }

            .running-item {
                color: orange;
                animation: blinker 2s linear infinite;
            }

            .running-item-no-anim {
                color: orange;
            }

            .passed-item {
                color: rgb(0,200,0);
            }

            .failed-item {
                color: red;
            }

            .skipped-item {
                color: rgb(0,200,200);
            }

            .counts {
                line-height: 16px;
            }

            .line-number {
                color: rgb(100,100,100);
                font-size: 11px;
                display: inline-block;
                vertical-align: top;
                position: relative;
                top: 2px;
                margin-left: 8px;
            }

            .vertical-line-container {
                border-left: 1px dashed rgb(100,100,100);
                margin-left: 4px;
                padding-left: 8px;
                display: inline-block;
            }

            .line > .vertical-line-container {
                position: relative;
                top: 1px;
                margin-bottom: 1px;
            }

            .stacktrace {
                padding: 5px 0 20px 30px;
                color: white;
                font-size: 12px;
            }

            .logs {
                padding: 5px 0 20px 30px;
                color: white;
                font-size: 12px;
            }

            .thumbs-up {
                cursor: default;
            }

            .preview-pane .step-name .filelocation {
                color: rgb(130,130,130);
                font-size: 12px;
            }

            .preview-pane .step-name .elapsed {
                color: rgb(130,130,130);
                font-size: 12px;
            }

            .preview-pane .step-state {
                margin-left: 20px;
                margin-bottom: 20px;
                font-size: 13px;
            }

            .step-report {
                margin: 20px;
            }

            .preview-pane-msg {
                color: rgb(90,90,90);
                font-size: 16px;
                height: 100%;
                padding-top: 70px;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <div id="root"></div>
<!--
        App
            TreePane
                TreeHeader
                    ProgressBar
                TreeErrors
                    TreeError
                    TreeError
                    ...
                BranchList
                    Branch
                        BranchError
                        Steps
                            Line
                                LineError
                            Line
                            Line
                            ...
                    Branch
                    ...
                BranchList
                BranchList
                BranchList
                BranchList
            PreviewPane
                PreviewHeader
                PreviewError
                PreviewDetails
                PreviewLogs
-->



        <div class="divider">
            <div class="divider-pane tree-pane">
                <div class="tree-header">
                    <div class="header">SmashTEST Report</div>
                    <div class="tree-header-container">
                        <div class="progress-bar tree-header-item">
                            <div class="filled-bar">
                                <div class="filled-bar-text"></div>
                            </div>
                        </div>
                        <div class="runner-status-msg tree-header-item">
                            <div class="runner-complete">Run completed (34m 54s) <span class="thumbs-up">&#x1f44d;</span></div> <!-- NOTE: If timeElapsed is -1 or undefined, don't print it out -->
                            <div class="runner-running running-item">Currently running</div>
                            <div class="runner-paused skipped-item">Run paused</div>
                            <div class="runner-stopped">Run stopped (12m 54s)</div> <!-- NOTE: If timeElapsed is -1 or undefined, don't print it out -->
                            <div class="running-item-no-anim">In DEBUG mode (~)</div>
                        </div>
                        <div class="counts tree-header-item">
                            <span class="passed-count passed-item">10 passed</span> |
                            <span class="failed-count failed-item">7 failed</span> |
                            <span class="skipped-count skipped-item">8 skipped</span> |
                            <span class="notrunyet-count notrunyet-item">9 not run yet</span> |
                            <span class="total-count">22 total branches</span>
                        </div>
                        <div class="msg tree-header-item" onclick="location.reload();">
                            This report is a snapshot from [DATETIME] |
                            <span class="refresh-msg">
                                <img class="refresh-icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMyIDMyIiBoZWlnaHQ9IjMycHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMycHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNS40NDQsNC4yOTFjMCwwLTEuMzI1LDEuMjkzLTIuMjQzLDIuMjAxQzE4LjUxNCwzLjA2OCwxMS45MDksMy40NTYsNy42NzYsNy42ODkgICBjLTIuNDcsMi40Ny0zLjYyMyw1Ljc0Ny0zLjQ4NCw4Ljk4M2g0QzguMDUxLDE0LjQ2LDguODEsMTIuMjA1LDEwLjUsMTAuNTE0YzIuNjYzLTIuNjYzLDYuNzM1LTMuMDQzLDkuODEyLTEuMTYyICAgYy0xLjA0MiwxLjAzMi0yLjI0NSwyLjIzOC0yLjI0NSwyLjIzOGMtMC44NDEsMS4wMDksMC4xMDQsMS41OTIsMC41ODQsMS41NzdsNS42MjQtMC4wMDFjMC4yOTcsMCwwLjUzOSwwLjAwMSwwLjUzOSwwLjAwMSAgIHMwLjI0NSwwLDAuNTQzLDBoMS4wOTJjMC4yOTgsMCwwLjU0LTAuMjQzLDAuNTQtMC41NDFWNC44OTVDMjcuMDIzLDQuMTg4LDI2LjI0NywzLjUwMiwyNS40NDQsNC4yOTF6IiBmaWxsPSIjNTE1MTUxIi8+PHBhdGggZD0iTTYuNTU1LDI3LjcwOWMwLDAsMS4zMjYtMS4yOTMsMi4yNDMtMi4yMDFjNC42ODgsMy40MjQsMTEuMjkyLDMuMDM2LDE1LjUyNi0xLjE5NyAgIGMyLjQ3LTIuNDcxLDMuNjIyLTUuNzQ3LDMuNDg0LTguOTgzaC00LjAwMWMwLjE0MiwyLjIxMS0wLjYxNyw0LjQ2Ny0yLjMwOCw2LjE1OWMtMi42NjMsMi42NjItNi43MzUsMy4wNDMtOS44MTIsMS4xNjEgICBjMS4wNDItMS4wMzIsMi4yNDUtMi4yMzgsMi4yNDUtMi4yMzhjMC44NDEtMS4wMS0wLjEwNC0xLjU5Mi0wLjU4NC0xLjU3N2wtNS42MjQsMC4wMDJjLTAuMjk3LDAtMC41NC0wLjAwMi0wLjU0LTAuMDAyICAgcy0wLjI0NSwwLTAuNTQzLDBINS41NTFjLTAuMjk4LDAtMC41NCwwLjI0Mi0wLjU0MSwwLjU0MXY3LjczMkM0Ljk3NywyNy44MTIsNS43NTMsMjguNDk4LDYuNTU1LDI3LjcwOXoiIGZpbGw9IiM1MTUxNTEiLz48L2c+PC9zdmc+">
                                </img>
                                Refresh for latest results
                            </span>
                        </div>
                        <!--
                        <div class="msg tree-header-item">
                            Note: Each branch below shows steps in order of execution. Indents represent function calls.
                        </div>
                        -->
                    </div>
                </div>
                <div class="branch-container">
                    <div class="tree-error">
                        <div class="header failed-item">Hook errors</div>
                        <div class="stacktrace">
                            Error: Before/After Everything errors [file.txt:12] (from error.filename/error.lineNumber)<br>
                            &nbsp;&nbsp;Get error object from before/afterEverything Step itself<br>
                            &nbsp;&nbsp;STACK TRACE HERE<br>
                            &nbsp;&nbsp;STACK TRACE HERE<br>
                            &nbsp;&nbsp;STACK TRACE HERE<br>
                            &nbsp;&nbsp;STACK TRACE HERE
                        </div>
                        <div class="stacktrace">
                            Error: Before/After Everything errors [file.txt:12] (from error.filename/error.lineNumber)<br>
                            &nbsp;&nbsp;Get error object from before/afterEverything Step itself<br>
                            &nbsp;&nbsp;STACK TRACE HERE<br>
                            &nbsp;&nbsp;STACK TRACE HERE<br>
                            &nbsp;&nbsp;STACK TRACE HERE<br>
                            &nbsp;&nbsp;STACK TRACE HERE
                        </div>
                    </div>
                    <div class="header">Branches currently running</div>
                    <div class="branch">
                        <div class="branch-indicator running">
                        </div>
                        <div class="branch-contents">
                            <div class="branch-error">
                                <div class="stacktrace">
                                    Error: Before/After Every Branch Errors [file.txt:12] (from error.filename/error.lineNumber)<br>
                                    &nbsp;&nbsp;Branch.error will have this<br>
                                    &nbsp;&nbsp;STACK TRACE HERE<br>
                                    &nbsp;&nbsp;STACK TRACE HERE<br>
                                    &nbsp;&nbsp;STACK TRACE HERE<br>
                                    &nbsp;&nbsp;STACK TRACE HERE
                                </div>
                            </div>
                            <div class="steps">
                                <div class="line">
                                    <span class="line-number">1</span> <!-- NOTE: Add an &nbsp; in front of the line number depending on the amount of digits in the last step of this branch -->
                                    <span class="content passed-expected passed-item">
                                        Passed expected
                                        <span class="filelocation">[file.txt:10]</span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">2</span>
                                    <span class="vertical-line-container">
                                        <span class="content passed-expected passed-item">
                                            Passed expected
                                            <span class="filelocation">[file.txt:10]</span>
                                        </span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">3</span>
                                    <span class="vertical-line-container">
                                        <span class="vertical-line-container">
                                            <span class="content passed-unexpected passed-item">
                                                Passed unexpected
                                                <span class="pill unexpected">UNEXPECTED</span>
                                                <span class="filelocation">[file.txt:10]</span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">4</span>
                                    <span class="vertical-line-container">
                                        <span class="vertical-line-container">
                                            <span class="content failed-expected failed-item">
                                                Failed expected
                                                <span class="pill expected">EXPECTED</span>
                                                <span class="filelocation">[file.txt:10]</span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">5</span>
                                    <span class="vertical-line-container">
                                        <span class="vertical-line-container">
                                            <span class="content failed-unexpected failed-item">
                                                Failed unexpected
                                                <span class="pill unexpected">UNEXPECTED</span>
                                                <span class="filelocation">[file.txt:10]</span>
                                                <div class="stacktrace">
                                                    Error: Before/After Every Step error, or Step error [file.txt:12] (from error.filename/error.lineNumber)<br>
                                                    &nbsp;&nbsp;If Step.error exists (regardless of expectation), this section will be rendered<br>
                                                    &nbsp;&nbsp;STACK TRACE HERE<br>
                                                    &nbsp;&nbsp;STACK TRACE HERE<br>
                                                    &nbsp;&nbsp;STACK TRACE HERE<br>
                                                    &nbsp;&nbsp;STACK TRACE HERE
                                                </div>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">6</span>
                                    <span class="vertical-line-container">
                                        <span class="content skipped skipped-item">
                                            Skipped
                                            <span class="pill skipped">SKIPPED</span>
                                            <span class="filelocation">[file.txt:10]</span>
                                        </span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">7</span>
                                    <span class="vertical-line-container">
                                        <span class="vertical-line-container">
                                            <span class="content running running-item">
                                                Running
                                                <span class="pill running">RUNNING</span>
                                                <span class="filelocation">[file.txt:10]</span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="line-number">8</span>
                                    <span class="vertical-line-container">
                                        <span class="vertical-line-container">
                                            <span class="content notrunyet notrunyet-item">
                                                Not run yet
                                                <span class="filelocation">[file.txt:10]</span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="branch-container">
                    <div class="header">Failed branches</div>
                    <div class="none-indicator">None</div>
                </div>
                <div class="branch-container">
                    <div class="header">Passed branches</div>
                    <div class="none-indicator">None</div>
                </div>
                <div class="branch-container">
                    <div class="header">Skipped branches</div>
                    <div class="none-indicator">None</div>
                </div>
                <div class="branch-container">
                    <div class="header">Branches not run yet</div>
                    <div class="none-indicator">None</div>
                </div>
            </div>
            <div class="divider-pane preview-pane">
                <div class="preview-pane-msg">
                    < Select a step to preview
                </div>
                <div class="header step-name failed-item">
                    My big failing step
                    <span class="filelocation">[file.txt:10]</span>
                    <span class="filelocation">(13m 45s)</span> <!-- NOTE: If timeElapsed is -1 or undefined, don't print it out -->
                </div>
                <div class="step-state passed-item">
                    Passed
                </div>
                <div class="step-state passed-item">
                    Passed unexpectedly
                </div>
                <div class="step-state failed-item">
                    Failed
                </div>
                <div class="step-state failed-item">
                    Failed expectedly
                </div>
                <div class="step-state running-item-no-anim">
                    Currently running
                </div>
                <div class="step-state skipped-item">
                    Skipped
                </div>
                <div class="step-state notrunyet-item">
                    Not run yet
                </div>
                <div class="header">Error</div>
                <div class="stacktrace">
                    Error: Before/After Every Step error, or Step error [file.txt:12] (from error.filename/error.lineNumber)<br>
                    &nbsp;&nbsp;If Step.error exists (regardless of expectation), this section will be rendered<br>
                    &nbsp;&nbsp;STACK TRACE HERE<br>
                    &nbsp;&nbsp;STACK TRACE HERE<br>
                    &nbsp;&nbsp;STACK TRACE HERE<br>
                    &nbsp;&nbsp;STACK TRACE HERE
                </div>
                <div class="header">Details</div>
                <div class="step-report">
                </div>
                <div class="header">Logs</div>
                <div class="logs">
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                </div>

                <br><br><br><br>


                <div class="header step-name failed-item">
                    Branch ending at file.txt:10 <!-- filename:lineNumber of last step in this branch, whether or not that step passed or even ran -->
                    <span class="filelocation">(13m 45s)</span> <!-- NOTE: If timeElapsed is -1 or undefined, don't print it out -->
                </div>
                <div class="step-state passed-item">
                    Passed
                </div>
                <div class="step-state failed-item">
                    Failed
                </div>
                <div class="step-state running-item-no-anim">
                    Currently running
                </div>
                <div class="step-state skipped-item">
                    Skipped
                </div>
                <div class="step-state notrunyet-item">
                    Not run yet
                </div>
                <div class="header">Error</div>
                <div class="stacktrace">
                    Error: Before/After Every Branch error [file.txt:12] (from error.filename/error.lineNumber)<br>
                    &nbsp;&nbsp;If Branch.error exists, this section will be rendered<br>
                    &nbsp;&nbsp;STACK TRACE HERE<br>
                    &nbsp;&nbsp;STACK TRACE HERE<br>
                    &nbsp;&nbsp;STACK TRACE HERE<br>
                    &nbsp;&nbsp;STACK TRACE HERE
                </div>
                <div class="header">Logs</div>
                <div class="logs">
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                    LOG LINE<br>
                </div>
            </div>
        </div>

        <script type="text/babel">
            class App extends React.Component {
                constructor() {
                    super();

                    this.state = {
                        tree: null,
                        runner: null,
                        reportTime: null
                    };

                    // Parse in tree
                    let treeContent = document.querySelector("meta[name=treeObj]").getAttribute("content");
                    let treeJSON = this.unescapeHtml(treeContent);
                    if(!treeJSON.startsWith("\{\{\{")) {
                        this.state.tree = JSON.parse(treeJSON);
                    }

                    // Parse in runner
                    let runnerContent = document.querySelector("meta[name=runnerObj]").getAttribute("content");
                    let runnerJSON = this.unescapeHtml(runnerContent);
                    if(!runnerJSON.startsWith("\{\{\{")) {
                        this.state.runner = JSON.parse(runnerJSON);
                    }

                    // Parse in reportTime
                    this.state.reportTime = document.querySelector("meta[name=reportTime]").getAttribute("content");






                    this.arr = ['one', 'two'];

                    this.setState(state => {
                        return {

                        };
                    });

                    this.func = this.func.bind(this);
                }

                unescapeHtml(str) {
                    return str
                        .replace(/&#039;/g, "'")
                        .replace(/&quot;/g, "\"")
                        .replace(/&gt;/g, ">")
                        .replace(/&lt;/g, "<")
                        .replace(/&amp;/g, "&");
                }

                func() {
                    console.log("purr");
                }

                render() {
                    return (
                        <div>
                            <div className="cats" onClick={this.func}>
                                {this.state.msg + " " + this.props.message}
                            </div>
                            {this.arr.map(item => <div>{item}</div>)}
                        </div>
                    );
                }
            }

            ReactDOM.render(
                <App message="meow"/>,
                document.querySelector("#root")
            );








            // Progress bar
            function setProgress(decimal) {
                let filledBar = document.querySelector(".progress-bar .filled-bar");
                let percentage = (decimal * 100) + "%";
                filledBar.style.width = percentage;

                let filledBarText = document.querySelector(".progress-bar .filled-bar .filled-bar-text");
                filledBarText.innerHTML = percentage;

                if(filledBarText.scrollWidth > filledBar.offsetWidth) { // text doesn't have room
                    filledBarText.innerHTML = "";
                }
            }

            setProgress(.76);

            // Tooltips
            let tippyOptions = {
                placement: "right",
                followCursor: true,
                delay: 0,
                animation: "fade",
                arrow: true,
                arrowType: "sharp"
            };

            function wrapTippyContent(content) {
                return "<span class='tooltip-text'>" + content + "</span>";
            }

            tippyOptions.content = wrapTippyContent("Currently running branch");
            tippy(".branch-indicator.running", tippyOptions);

            tippyOptions.content = wrapTippyContent("Branch passed");
            tippy(".branch-indicator.passed", tippyOptions);

            tippyOptions.content = wrapTippyContent("Branch failed");
            tippy(".branch-indicator.failed", tippyOptions);

            tippyOptions.content = wrapTippyContent("Branch skipped");
            tippy(".branch-indicator.skipped", tippyOptions);

            tippyOptions.content = wrapTippyContent("Branch not run yet");
            tippy(".branch-indicator.notrunyet", tippyOptions);

            tippyOptions.content = wrapTippyContent("This step passed, but was<br>expected to fail (#)");
            tippy(".pill.unexpected", tippyOptions);

            tippyOptions.content = wrapTippyContent("This step failed,<br>as was expected (#)");
            tippy(".pill.expected", tippyOptions);

            tippyOptions.content = wrapTippyContent("Congrats! All branches passed");
            tippy(".thumbs-up", tippyOptions);

            // Branch's indicator events
            document.querySelectorAll(".branch-indicator").forEach((elem) => {
                let branch = elem.closest(".branch");

                elem.addEventListener("mouseover", () => {
                    branch.classList.add("hover");
                });

                elem.addEventListener("mouseout", () => {
                    branch.classList.remove("hover");
                });

                elem.addEventListener("click", () => {
                    toggleActive(branch);
                    clearSelections(branch);
                });
            });

            // Line events
            document.querySelectorAll(".line").forEach((elem) => {
                elem.addEventListener("click", () => {
                    toggleActive(elem);
                    clearSelections(elem);
                });
            });

            function clearSelections(notElem) {
                document.querySelectorAll(".branch").forEach(elem => elem !== notElem && elem.classList.remove("active"));
                document.querySelectorAll(".line").forEach(elem => elem !== notElem && elem.classList.remove("active"));
            }

            function toggleActive(elem) {
                if(elem.classList.contains("active")) {
                    elem.classList.remove("active");
                }
                else {
                    elem.classList.add("active");
                }
            }
        </script>
    </body>
</html>
